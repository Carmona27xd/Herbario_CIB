<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Herbario CIB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <!-- CSS -->
  <link rel="stylesheet" href="CSS/homeStyle.css">

  <style>
    body { margin: 0; }

    .bg-uv-dark { background-color: #27346b !important; }

    footer {
      background-color: #2e7d3d;
      color: white;
    }

    .btn-logIn:hover,
    .btn-colector:hover,
    .btn-records:hover {
      background-color: #2e7d3d;
    }

    .dropdown-menu .dropdown-item:hover {
      background-color: #2e7d3d;
      color: white;
    }

    .nav-link.active {
      background-color: #2e7d3d;
      color: white !important;
      border-radius: 5px;
      padding-left: 10px;
      padding-right: 10px;
    }
  </style>
</head>

<body class="m-0 d-flex flex-column min-vh-100">

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg bg-uv-dark">
    <div class="container-fluid">
      <a class="navbar-brand text-white fw-bold" href="PruebaHome/index.html">Herbario CIB</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-center" id="navbarMain">
        <ul class="navbar-nav">
          <li class="nav-item mx-2">
            <a class="nav-link text-white active" href="home.html">Inicio</a>
          </li>
          <li class="nav-item mx-2">
            <a class="nav-link text-white" href="ConsultSpecimen/consultSpecimen.html">Consulta</a>
          </li>
          <li class="nav-item mx-2">
            <a class="nav-link text-white" href="PruebaHome/aboutUs.html">Sobre Nosotros</a>
          </li>
          <li class="nav-item mx-2">
            <a class="nav-link text-white" href="PruebaHome/background.html">Antecedentes</a>
          </li>
        </ul>
      </div>

      <!-- Menú dinámico del usuario -->
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle rounded-circle d-flex align-items-center justify-content-center" type="button" id="perfilDropdown" data-bs-toggle="dropdown" aria-expanded="false" style="width: 40px; height: 40px;">
          <i class="bi bi-person-fill fs-5"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="perfilDropdown">
          <!-- Este menú se llenará dinámicamente con JS -->
        </ul>
      </div>
    </div>
  </nav>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="flex-grow-1 p-5 bg-white">
    <h1 style="color: #27346b;">Herbario CIB</h1>
    <p class="fs-5">
      El herbario de investigaciones Biológicas, conocido desde su fundación por su acrónimo CIB (Centro de Investigaciones Biológicas) fue creado en el año de 1985. La colección inicial consistía en aproximadamente 500 ejemplares de plantas colectadas principalmente por Mario Vázquez Torres en el sur-este mexicano. Sin embargo, entre 1985 y 1990, el acervo rebasó los 5000 especímenes, etapa que actualmente representa la más productiva (en términos de ejemplares de herbario) hasta el momento conocida en CIB.
    </p>
  </main>

  <!-- FOOTER -->
  <footer class="p-3 small mt-auto">
    <div class="container-fluid d-flex flex-column flex-md-row justify-content-between align-items-start">
      <div>
        <strong>Ubicación</strong><br>
        Herbario CIB, Instituto de investigaciones Biológicas,<br>
        Universidad Veracruzana, Calle,<br>
        Dr. Luis Castelazo s/n, Rubi Animas.
      </div>
      <div class="text-end mt-3 mt-md-0">
        <div><a href="https://uvmx.sharepoint.com/sites/rept/files/Forms/AllItems.aspx?id=%2Fsites%2Frept%2Ffiles%2F2023%2Favisos-privacidad%2FG-06%2Epdf" target="_blank" class="text-white text-decoration-underline">Aviso de Privacidad de Actividades Institucionales</a></div>
        <div><a href="https://uvmx.sharepoint.com/sites/rept/files/Forms/AllItems.aspx?id=%2Fsites%2Frept%2Ffiles%2F2023%2Favisos-privacidad%2FG-19%2Epdf" target="_blank" class="text-white text-decoration-underline">Aviso de Privacidad de Participantes Externos en Actividades Institucionales de la UV.</a></div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- REVISAR, SE DEBE ELIMINAR ANTES DE DESPLIEGUE Y REVISAR LA LOGICA xd -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const menu = document.querySelector('.dropdown-menu');
      const role = localStorage.getItem('role');

      // Momentario
      const roleNames = {
        1: 'Público General',
        2: 'Colector',
        3: 'Comité Académico',
        4: 'Administrador'
      };

      menu.innerHTML = '';

      if (!role) {
        // Usuario sin loguearse
        menu.innerHTML = `
          <li><a class="dropdown-item" href="logIn.html">Inicia Sesión</a></li>
          <li><a class="dropdown-item" href="register.html">Regístrate como visitante</a></li>
          <li><a class="dropdown-item" href="collectorApplication.html">Regístrate como colector</a></li>
          <li><a class="dropdown-item" href="#">Regístrate como Investigador</a></li>
        `;
        return;
      }

      // Mostrar solo el nombre del rol
      const roleText = roleNames[role] || 'Rol desconocido';
      menu.innerHTML += `<li><span class="dropdown-item-text fw-bold">${roleText}</span></li><li><hr class="dropdown-divider"></li>`;

      switch (parseInt(role)) {
        case 1: // Público General
          menu.innerHTML += `
            <li><a class="dropdown-item" href="ConsultSpecimen/consultSpecimen.html">Consultar</a></li>
          `;
          break;
        case 2: // Colector
          menu.innerHTML += `
            <li><a class="dropdown-item" href="ConsultSpecimen/consultSpecimen.html">Consultar</a></li>
            <li><a class="dropdown-item" href="RegisterSpecimens/registerSpecimens.html">Registrar Ejemplar</a></li>
          `;
          break;
        case 3: // Comité Académico
          menu.innerHTML += `
            <li><a class="dropdown-item" href="ConsultSpecimen/consultSpecimen.html">Consultar</a></li>
          `;
          break;
        case 4: // Administrador
          menu.innerHTML += `
            <li><a class="dropdown-item" href="ConsultSpecimen/consultSpecimen.html">Consultar</a></li>
            <li><a class="dropdown-item" href="RegisterSpecimens/registerSpecimens.html">Registrar Ejemplar</a></li>
            <li><a class="dropdown-item" href="#">Generar Etiqueta</a></li>
            <li><a class="dropdown-item" href="#">Gestionar Ejemplares</a></li>
          `;
          break;
        default:
        menu.innerHTML += `<li><span class="dropdown-item-text text-muted">Rol desconocido</span></li>`;
      }

      menu.innerHTML += `
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item text-danger" href="#" id="cerrarSesionBtn">Cerrar sesión</a></li>
      `;

      document.getElementById('cerrarSesionBtn').addEventListener('click', () => {
        localStorage.clear();
        location.reload();
      });
    });
  </script>
</body>
</html>